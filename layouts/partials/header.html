{{ $config := .Site.Data.config }}
{{ $site := $config.site }}
{{ $branding := $config.branding }}
{{ $social := $config.social }}
{{ $header := $config.header }} 

<!-- ===== Header avec Z-INDEX UNIFIÉ ===== -->
<header class="relative" style="z-index: var(--z-fixed);">
  <!-- Effet de fond subtil -->
  <div class="absolute inset-0 bg-gradient-to-r from-transparent via-amber-500/5 to-transparent"></div>
  
  <!-- Particules minimalistes -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <div class="absolute top-4 left-32 w-1 h-1 bg-amber-400/30 rounded-full animate-pulse"></div>
    <div class="absolute top-8 right-40 w-1 h-1 bg-amber-400/20 rounded-full animate-pulse animation-delay-1000"></div>
  </div>

  <!-- ===== Barre du haut : logo, recherche, réseaux sociaux ===== -->
  <div class="relative backdrop-blur-xl bg-white/80 border-b border-slate-200/50 shadow-sm" style="z-index: var(--z-fixed);">
    <div class="max-w-7xl mx-auto px-6 flex justify-between items-center py-6">
      
      <!-- Logo sophistiqué -->
      <a href="{{ .Site.BaseURL }}" class="group flex items-center space-x-3 no-underline" aria-label="Accueil">
        <div class="w-10 h-10 brand rounded-full flex items-center justify-center transform group-hover:scale-105 transition-all duration-300 shadow-lg">
          <span class="text-white font-bold text-lg">{{ $branding.logo_text | default (substr ($site.name | default .Site.Title) 0 1) }}</span>
        </div>
        <div class="hidden sm:block">
          <div class="text-2xl font-bold text-slate-900 group-hover:text-amber-700 transition-colors duration-300">
            {{ $site.name | default .Site.Title }}
          </div>
          <p class="text-xs text-slate-500 tracking-wider uppercase">{{ $site.tagline }}</p>
        </div>
      </a>

      <!-- Barre de recherche avec NOUVELLES CLASSES -->
      <div class="hidden md:block flex-1 max-w-lg mx-8">
        <div class="relative group">
          <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
            <svg class="h-5 w-5 text-slate-400 group-focus-within:text-amber-500 transition-colors duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
          </div>
          {{ partial "search-input.html" (dict "Placeholder" $header.search_placeholder "TargetID" "input" "Class" "w-full pl-12 pr-4 py-3 bg-white/60 border border-slate-200/50 rounded-full text-slate-700 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-amber-400/50 focus:border-amber-400 transition-all duration-300 backdrop-blur-sm") }}
        </div>
      </div>

      <!-- Réseaux sociaux élégants -->
      <div class="flex items-center space-x-4">
        <div class="hidden sm:flex items-center space-x-3">
          {{ with $social.facebook }}
          <a href="{{ . }}" target="_blank" rel="noopener" aria-label="Facebook" class="w-10 h-10 bg-white/60 hover:bg-amber-50 rounded-full flex items-center justify-center text-slate-600 hover:text-amber-600 transition-colors">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
              <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.46h-1.261c-1.243 0-1.632.771-1.632 1.562v1.876h2.773l-.443 2.89h-2.33V21.877C18.343 21.128 22 17.005 22 12"></path>
            </svg>
          </a>
          {{ end }}
          
          {{/* INSTAGRAM MASQUÉ
          {{ with $social.instagram }}
          <a href="{{ . }}" target="_blank" rel="noopener" aria-label="Instagram" class="w-10 h-10 bg-white/60 hover:bg-amber-50 rounded-full flex items-center justify-center text-slate-600 hover:text-amber-600 transition-colors">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.05-1.646.069-4.85.069-3.205 0-3.584-.012-4.85-.069-3.225-.148-4.771-1.664-4.919-4.919C2.175 15.646 2.163 15.266 2.163 12c0-3.204.012-3.584.069-4.85.148-3.225 1.664-4.771 4.919-4.919C8.416 2.175 8.796 2.163 12 2.163zm0-2.163C8.741 0 8.332.012 7.052.07 3.956.217 1.562 2.612.07 5.706.012 6.986 0 7.395 0 12c0 4.605.012 5.014.07 6.294 1.492 3.094 3.886 5.489 6.982 5.636 1.28.058 1.689.07 4.948.07s3.668-.012 4.948-.07c3.096-.147 5.489-2.542 6.982-5.636.058-1.28.07-1.689.07-6.294s-.012-5.014-.07-6.294c-1.493-3.094-3.886-5.489-6.982-5.636C15.668.012 15.259 0 12 0zm0 5.838a6.162 6.162 0 1 0 0 12.324 6.162 6.162 0 0 0 0-12.324zm0 10.162a3.999 3.999 0 1 1 0-7.998 3.999 3.999 0 0 1 0 7.998zm6.406-11.845a1.44 1.44 0 1 0 0 2.881 1.44 1.44 0 0 0 0-2.881z"></path>
            </svg>
          </a>
          {{ end }}
          */}} 
        </div>
        
        <!-- Badge Pinterest sophistiqué -->
        {{ with $social.pinterest }}
        <a href="{{ . }}" target="_blank" rel="noopener" class="group relative inline-flex items-center px-4 py-2 brand rounded-full text-white text-sm font-medium tracking-wide hover:shadow-lg transition-all duration-200">
          <span class="relative z-10">{{ $header.follow_button_text }}</span>
          <div class="absolute inset-0 bg-gradient-to-r from-amber-500 to-amber-600 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
        </a>
        {{ end }}
      </div>
    </div>
  </div>

  <!-- ===== Navigation principale ===== -->
  <nav class="bg-white/80 border-b border-slate-200/50 shadow-sm">
    <div class="max-w-7xl mx-auto px-6">
      <ul class="flex space-x-8 font-semibold text-lg text-slate-800">
        <li><a href="/" class="hover:text-amber-700 transition-colors">Home</a></li>
        <li><a href="/recipes/" class="hover:text-amber-700 transition-colors">Recipes</a></li>
        <li class="relative group">
          <a href="/categories/" class="hover:text-amber-700 transition-colors">Categories</a>
          <!-- Submenu -->
          <ul class="absolute left-0 mt-2 w-48 bg-white border border-slate-200 rounded shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
            <li><a href="/categories/breakfast/" class="block px-4 py-2 hover:bg-gray-100">Breakfast</a></li>
            <li><a href="/categories/lunch/" class="block px-4 py-2 hover:bg-gray-100">Lunch</a></li>
            <li><a href="/categories/dinner/" class="block px-4 py-2 hover:bg-gray-100">Dinner</a></li>
            <li><a href="/categories/desserts/" class="block px-4 py-2 hover:bg-gray-100">Desserts</a></li>
          </ul>
        </li>
        <li><a href="/about/" class="hover:text-amber-700 transition-colors">About</a></li>
        <li><a href="/contact/" class="hover:text-amber-700 transition-colors">Contact</a></li>
      </ul>
    </div>
  </nav>
</header>
