<!-- layouts/partials/header.html  -->

{{ $config := .Site.Data.config }}
{{ $site := $config.site }}
{{ $branding := $config.branding }}
{{ $social := $config.social }}
{{ $header := $config.header }} 

<!-- ===== Header Professional ===== -->
<header class="bg-white shadow-sm border-b" style="border-color: var(--color-border);">
  
  <!-- Main Header Bar -->
  <div class="container mx-auto px-4 md:px-6">
    <div class="flex items-center h-16 md:h-20">
      
      <!-- Logo -->
      <a href="{{ .Site.BaseURL }}" class="flex items-center space-x-3 no-underline flex-shrink-0">
        <div class="brand w-10 h-10 rounded-lg flex items-center justify-center shadow-sm">
          <span class="text-white font-bold text-lg">{{ $branding.logo_text | default (substr ($site.name | default .Site.Title) 0 1) }}</span>
        </div>
        <div class="hidden sm:block">
          <h1 class="text-lg md:text-xl font-bold m-0 brand-text">{{ $site.name | default .Site.Title }}</h1>
          <p class="text-xs text-gray-500 m-0">{{ $site.tagline }}</p>
        </div>
      </a>

      <!-- Desktop Search -->
      <div class="hidden md:flex flex-1 max-w-2xl mx-6">
        <div class="search relative w-full">
          <svg class="search__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
          </svg>
          <input 
            id="search-input" 
            type="search" 
            placeholder="{{ $header.search_placeholder | default "Rechercher une recette..." }}" 
            class="search__input"
            autocomplete="off"
          >
          <div id="search-results-input" class="search__results" hidden></div>
        </div>
      </div>

      <!-- Desktop Actions -->
      <div class="hidden md:flex items-center space-x-4">
        {{ with $social.pinterest }}
        <a href="{{ . }}" target="_blank" rel="noopener" class="btn btn--primary">
          {{ $header.follow_button_text | default "Follow" }}
        </a>
        {{ end }}
      </div>

      <!-- Mobile Menu Button -->
      <button id="mobile-menu-toggle" class="md:hidden btn btn--ghost ml-auto" aria-label="Menu">
        <svg id="menu-icon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
        <svg id="close-icon" class="w-6 h-6 is-hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
    </div>
  </div>

  <!-- Desktop Navigation -->
  <nav class="sticky top-0 bg-white/95 backdrop-blur-sm border-t hidden md:block" style="border-color: var(--color-border); z-index: var(--z-sticky);">
    <div class="container mx-auto px-6">
      <div class="flex justify-center space-x-8 py-4">
        {{ range .Site.Menus.main }}
          {{ $displayName := .Name }}
          {{ if eq .Identifier "home" }}{{ $displayName = $config.navigation.menu_items.home }}{{ end }}
          {{ if eq .Identifier "recipes" }}{{ $displayName = $config.navigation.menu_items.recipes }}{{ end }}
          {{ if eq .Identifier "categories" }}{{ $displayName = $config.navigation.menu_items.categories }}{{ end }}
          {{ if eq .Identifier "about" }}{{ $displayName = $config.navigation.menu_items.about | default "About Us" }}{{ end }}
          {{ if eq .Identifier "contact" }}{{ $displayName = $config.navigation.menu_items.contact }}{{ end }}
          
          <a href="{{ .URL }}" class="nav-link {{ if or ($.Page.IsMenuCurrent "main" .) ($.Page.HasMenuCurrent "main" .) }}nav-active{{ end }}">
            {{ $displayName }}
          </a>
        {{ end }}
      </div>
    </div>
  </nav>

  <!-- Mobile Menu -->
  <div id="mobile-menu" class="md:hidden bg-white border-t" style="display: none; border-color: var(--color-border);">
    
    <!-- Mobile Search -->
    <div class="p-4 border-b" style="border-color: var(--color-border);">
      <div class="search relative">
        <svg class="search__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
        </svg>
        <input 
          id="search-mobile-input" 
          type="search" 
          placeholder="{{ $header.search_placeholder_mobile | default "Rechercher..." }}" 
          class="search__input"
          autocomplete="off"
        >
        <div id="search-results-mobile-input" class="search__results" hidden></div>
      </div>
    </div>
    
    <!-- Mobile Navigation -->
    <nav class="p-4 space-y-1">
      {{ range .Site.Menus.main }}
        {{ $displayName := .Name }}
        {{ if eq .Identifier "home" }}{{ $displayName = $config.navigation.menu_items.home }}{{ end }}
        {{ if eq .Identifier "recipes" }}{{ $displayName = $config.navigation.menu_items.recipes }}{{ end }}
        {{ if eq .Identifier "categories" }}{{ $displayName = $config.navigation.menu_items.categories }}{{ end }}
        {{ if eq .Identifier "about" }}{{ $displayName = $config.navigation.menu_items.about | default "About Us" }}{{ end }}
        {{ if eq .Identifier "contact" }}{{ $displayName = $config.navigation.menu_items.contact }}{{ end }}
        
        <a href="{{ .URL }}" class="mobile-nav-link {{ if or ($.Page.IsMenuCurrent "main" .) ($.Page.HasMenuCurrent "main" .) }}mobile-nav-active{{ end }}">
          {{ $displayName }}
        </a>
      {{ end }}
    </nav>

    <!-- Mobile Social -->
    <div class="p-4 border-t flex justify-center space-x-4" style="border-color: var(--color-border);">
      {{ with $social.pinterest }}
      <a href="{{ . }}" target="_blank" rel="noopener" class="btn btn--primary btn--sm">
        {{ $header.follow_button_text | default "Follow" }}
      </a>
      {{ end }}
    </div>
  </div>

</header>

<style>
/* Navigation Links */
.nav-link {
  display: block;
  padding: 0.5rem 1rem;
  font-weight: 500;
  color: var(--color-text);
  text-decoration: none;
  border-radius: 0.5rem;
  transition: all 0.2s ease;
}

.nav-link:hover {
  color: var(--primary);
  background-color: var(--secondary);
}

.nav-active {
  color: var(--primary);
  background-color: var(--secondary);
  font-weight: 600;
  text-decoration: underline;
  text-decoration-color: var(--primary);
  text-underline-offset: 3px;
}

/* Mobile Navigation */
.mobile-nav-link {
  display: block;
  padding: 0.75rem 1rem;
  font-weight: 500;
  color: var(--color-text);
  text-decoration: none;
  border-radius: 0.5rem;
  transition: all 0.2s ease;
}

.mobile-nav-link:hover {
  color: var(--primary);
  background-color: var(--secondary);
}

.mobile-nav-active {
  color: var(--primary);
  background-color: var(--secondary);
  font-weight: 600;
  border-left: 3px solid var(--primary);
  padding-left: calc(1rem - 3px);
}
</style>
