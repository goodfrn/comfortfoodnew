<!-- layouts/partials/header.html - VERSION PREMIUM SIMPLE -->

{{ $config := .Site.Data.config }}
{{ $site := $config.site }}
{{ $branding := $config.branding }}
{{ $social := $config.social }}
{{ $header := $config.header }} 

<!-- ===== Header Premium ===== -->
<header class="relative" style="z-index: var(--z-fixed);">
  
  <!-- ===== Barre principale ===== -->
  <div class="bg-white border-b shadow-sm" style="border-color: var(--color-border);">
    <div class="container mx-auto flex items-center justify-between h-20 px-6">
      
      <!-- === LOGO === -->
      <a href="{{ .Site.BaseURL }}" class="group flex items-center space-x-4 no-underline" aria-label="Accueil">
        <div class="w-12 h-12 brand rounded-xl flex items-center justify-center shadow-md transform group-hover:scale-105 transition-transform duration-300">
          <span class="text-white font-bold text-xl">{{ $branding.logo_text | default (substr ($site.name | default .Site.Title) 0 1) }}</span>
        </div>
        <div class="hidden sm:block">
          <h1 class="text-2xl font-bold brand-text group-hover:opacity-80 transition-opacity duration-300 m-0">
            {{ $site.name | default .Site.Title }}
          </h1>
          <p class="text-sm m-0" style="color: var(--primary-light);">{{ $site.tagline }}</p>
        </div>
      </a>

      <!-- === BARRE DE RECHERCHE === -->
      <div class="hidden md:flex flex-1 max-w-2xl mx-8">
        <div class="search relative w-full">
          <svg class="search__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
          {{ partial "search-input.html" (dict "Placeholder" ($header.search_placeholder | default "Rechercher une recette...") "TargetID" "search-input" "Class" "search__input") }}
          <div id="search-results-input" class="search__results" hidden></div>
        </div>
      </div>

      <!-- === ACTIONS === -->
      <div class="flex items-center space-x-4">
        
        <!-- Réseaux sociaux desktop -->
        <div class="hidden lg:flex items-center space-x-3">
          {{ with $social.facebook }}
          <a href="{{ . }}" target="_blank" rel="noopener" aria-label="Facebook" class="w-11 h-11 rounded-xl flex items-center justify-center transition-all duration-300 hover:scale-105" style="background-color: var(--secondary); color: var(--primary-light); border: 1px solid var(--color-border);" onmouseover="this.style.backgroundColor='var(--primary)'; this.style.color='white';" onmouseout="this.style.backgroundColor='var(--secondary)'; this.style.color='var(--primary-light)';">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
              <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
            </svg>
          </a>
          {{ end }}
        </div>
        
        <!-- Bouton Pinterest Premium -->
        {{ with $social.pinterest }}
        <a href="{{ . }}" target="_blank" rel="noopener" class="btn btn--primary px-6 py-3 rounded-xl shadow-md hover:shadow-lg transition-all duration-300">
          <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 0C5.374 0 0 5.374 0 12s5.374 12 12 12c.35 0 .697-.016 1.042-.046-.011-.175-.021-.351-.021-.529 0-1.958.727-3.708 1.917-5.076-.451-.021-.872-.084-1.27-.186-2.043-.523-3.542-2.297-3.542-4.458 0-2.508 2.032-4.541 4.541-4.541s4.541 2.032 4.541 4.541c0 2.161-1.499 3.935-3.542 4.458-.398.102-.819.165-1.27.186 1.19 1.368 1.917 3.118 1.917 5.076 0 .178-.01.354-.021.529.345.03.692.046 1.042.046 6.626 0 12-5.374 12-12S18.626 0 12 0zM8.5 13c-.828 0-1.5-.672-1.5-1.5s.672-1.5 1.5-1.5 1.5.672 1.5 1.5-.672 1.5-1.5 1.5zm3.5-4c-.828 0-1.5-.672-1.5-1.5S11.172 7 12 7s1.5.672 1.5 1.5S12.828 9 12 9zm3.5 4c-.828 0-1.5-.672-1.5-1.5s.672-1.5 1.5-1.5 1.5.672 1.5 1.5-.672 1.5-1.5 1.5z"/>
          </svg>
          Suivez-nous
        </a>
        {{ end }}
        
        <!-- Bouton mobile menu -->
        <button id="mobile-menu-toggle" class="md:hidden btn btn--ghost p-3 rounded-xl" aria-controls="mobile-nav" aria-expanded="false" aria-label="Menu">
          <svg id="menu-icon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
          <svg id="close-icon" class="w-6 h-6 is-hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- ===== Navigation Desktop - Sticky ===== -->
  <nav class="sticky top-0 bg-white/95 backdrop-blur-sm border-b" style="z-index: var(--z-sticky); border-color: var(--color-border);" aria-label="Navigation principale">
    <div class="container mx-auto px-6">
      <div class="hidden md:flex items-center justify-center space-x-10 py-4">
        {{ range .Site.Menus.main }}
          {{ $displayName := .Name }}
          {{ if eq .Identifier "home" }}{{ $displayName = $config.navigation.menu_items.home }}{{ end }}
          {{ if eq .Identifier "recipes" }}{{ $displayName = $config.navigation.menu_items.recipes }}{{ end }}
          {{ if eq .Identifier "categories" }}{{ $displayName = $config.navigation.menu_items.categories }}{{ end }}
          {{ if eq .Identifier "about" }}{{ $displayName = $config.navigation.menu_items.about | default "About Us" }}{{ end }}
          {{ if eq .Identifier "contact" }}{{ $displayName = $config.navigation.menu_items.contact }}{{ end }}
          
          <a href="{{ .URL }}" class="relative px-4 py-2 font-medium text-lg no-underline transition-all duration-300 rounded-lg {{ if or ($.Page.IsMenuCurrent "main" .) ($.Page.HasMenuCurrent "main" .) }}nav-active{{ else }}nav-link{{ end }}" aria-current="{{ if or ($.Page.IsMenuCurrent "main" .) ($.Page.HasMenuCurrent "main" .) }}page{{ else }}false{{ end }}">
            {{ $displayName }}
          </a>
        {{ end }}
      </div>
    </div>
  </nav>

  <!-- ===== Menu Mobile Premium ===== -->
  <div id="mobile-nav" class="md:hidden bg-white border-b animate-slide-in-down" style="display: none; border-color: var(--color-border);">
    
    <!-- Recherche mobile -->
    <div class="p-6 border-b" style="border-color: var(--color-border);">
      <div class="search relative">
        <svg class="search__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
        </svg>
        {{ partial "search-input.html" (dict "Placeholder" ($header.search_placeholder_mobile | default "Rechercher...") "TargetID" "search-mobile-input" "Class" "search__input") }}
        <div id="search-results-mobile-input" class="search__results" hidden></div>
      </div>
    </div>
    
    <!-- Navigation mobile -->
    <nav class="py-4">
      <div class="space-y-2 px-6">
        {{ range .Site.Menus.main }}
          {{ $displayName := .Name }}
          {{ if eq .Identifier "home" }}{{ $displayName = $config.navigation.menu_items.home }}{{ end }}
          {{ if eq .Identifier "recipes" }}{{ $displayName = $config.navigation.menu_items.recipes }}{{ end }}
          {{ if eq .Identifier "categories" }}{{ $displayName = $config.navigation.menu_items.categories }}{{ end }}
          {{ if eq .Identifier "about" }}{{ $displayName = $config.navigation.menu_items.about | default "About Us" }}{{ end }}
          {{ if eq .Identifier "contact" }}{{ $displayName = $config.navigation.menu_items.contact }}{{ end }}
          
          <a href="{{ .URL }}" class="block px-4 py-3 rounded-xl font-medium text-lg no-underline transition-all duration-300 {{ if or ($.Page.IsMenuCurrent "main" .) ($.Page.HasMenuCurrent "main" .) }}mobile-nav-active{{ else }}mobile-nav-link{{ end }}" aria-current="{{ if or ($.Page.IsMenuCurrent "main" .) ($.Page.HasMenuCurrent "main" .) }}page{{ else }}false{{ end }}">
            {{ $displayName }}
          </a>
        {{ end }}
      </div>
    </nav>
    
    <!-- Réseaux sociaux mobile -->
    <div class="p-6 border-t flex items-center justify-center space-x-6" style="border-color: var(--color-border);">
      {{ with $social.facebook }}
      <a href="{{ . }}" target="_blank" rel="noopener" aria-label="Facebook" class="w-12 h-12 rounded-xl flex items-center justify-center transition-all duration-300" style="background-color: var(--secondary); color: var(--primary);">
        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
          <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
        </svg>
      </a>
      {{ end }}
      
      {{ with $social.pinterest }}
      <a href="{{ . }}" target="_blank" rel="noopener" aria-label="Pinterest" class="btn btn--primary px-6 py-3 rounded-xl">
        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 0C5.374 0 0 5.374 0 12s5.374 12 12 12c.35 0 .697-.016 1.042-.046-.011-.175-.021-.351-.021-.529 0-1.958.727-3.708 1.917-5.076-.451-.021-.872-.084-1.27-.186-2.043-.523-3.542-2.297-3.542-4.458 0-2.508 2.032-4.541 4.541-4.541s4.541 2.032 4.541 4.541c0 2.161-1.499 3.935-3.542 4.458-.398.102-.819.165-1.27.186 1.19 1.368 1.917 3.118 1.917 5.076 0 .178-.01.354-.021.529.345.03.692.046 1.042.046 6.626 0 12-5.374 12-12S18.626 0 12 0z"/>
        </svg>
        Suivez-nous
      </a>
      {{ end }}
    </div>
  </div>
</header>

<style>
/* === NAVIGATION ACTIVE STATES === */
.nav-link {
  color: var(--color-text);
}

.nav-link:hover {
  color: var(--primary);
  background-color: var(--secondary);
}

.nav-active {
  color: var(--primary);
  background-color: var(--secondary);
  font-weight: 600;
  text-decoration: underline;
  text-decoration-color: var(--primary);
  text-underline-offset: 4px;
}

/* === NAVIGATION MOBILE === */
.mobile-nav-link {
  color: var(--color-text);
}

.mobile-nav-link:hover {
  color: var(--primary);
  background-color: var(--secondary);
}

.mobile-nav-active {
  color: var(--primary);
  background-color: var(--secondary);
  font-weight: 600;
  border-left: 4px solid var(--primary);
  padding-left: calc(1rem - 4px);
}
</style>
