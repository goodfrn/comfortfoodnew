{{/* layouts/partials/hero.html – Version PERFORMANCE OPTIMISÉE */}}

{{ $config := .Site.Data.config }}
{{ $hero := $config.hero }}

{{/*----------------------------------------------
  1. On récupère les images sources
------------------------------------------------*/}}
{{ $srcDesktop := "images/hero-bg.jpg" }}
{{ $srcMobile := "images/hero-bg_mobil.jpg" }}
{{ $imgDesktop := resources.Get $srcDesktop }}
{{ $imgMobile := resources.Get $srcMobile }}

{{ if and $imgDesktop $imgMobile }}
  <section class="hero relative overflow-hidden min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-200 to-gray-300 mb-16">
    {{/*------------------------------------------
          Background gris immédiat (0ms render delay)
    -------------------------------------------*/}}
    <div class="absolute inset-0 w-full h-full bg-gradient-to-br from-gray-100 via-gray-200 to-gray-300 z-0"></div>
    
    {{/*------------------------------------------
          Picture optimisé WebP mobile + desktop - QUALITÉ AMÉLIORÉE
    -------------------------------------------*/}}
    <picture class="absolute inset-0 w-full h-full z-5">
      {{/* Mobile : convertit en WebP - QUALITÉ q75 */}}
      {{ $mobileWebP := $imgMobile.Fill "450x600 q75 webp" }}
      <source 
        media="(max-width: 768px)" 
        srcset="{{ $mobileWebP.RelPermalink }}"
        type="image/webp">
      
      {{/* Desktop : WebP responsive optimisé - QUALITÉ q75 */}}
      <source 
        srcset="{{ ($imgDesktop.Fill "800x450 q75 webp").RelPermalink }} 800w,
                {{ ($imgDesktop.Fill "1200x675 q75 webp").RelPermalink }} 1200w,
                {{ ($imgDesktop.Fill "1600x900 q75 webp").RelPermalink }} 1600w"
        sizes="(min-width: 769px) 100vw"
        type="image/webp">
        
      <img
        class="w-full h-full object-cover opacity-0 transition-opacity duration-300"
        src="{{ ($imgDesktop.Fill "1200x675 q75 webp").RelPermalink }}"
        loading="eager"
        fetchpriority="high"
        alt="Découvre ta recette du jour"
        width="1600"
        height="900"
        onload="this.style.opacity='1'">
    </picture>

    <!-- --- Overlays et design inchangés --- -->
    <div class="absolute inset-0 bg-gradient-to-b from-black/20 via-black/50 to-black/70 z-10"></div>
    <div class="absolute inset-0 bg-gradient-to-r from-transparent via-transparent to-black/20 z-10"></div>

    {{/*-------------------------
         6. CONTENU PRINCIPAL - MAINTENANT CENTRALISÉ !
    --------------------------*/}}
    <div class="relative z-20 flex flex-col items-center justify-center min-h-screen text-center px-6 py-6 max-w-5xl mx-auto">
      <!-- Badge animé - COULEUR COHÉRENTE -->
      <div class="inline-flex items-center px-4 py-2 mb-8 bg-white/10 backdrop-blur-sm border border-white/20 rounded-full text-white/90 text-sm font-medium tracking-wide animate-pulse">
        <span class="w-2 h-2 rounded-full mr-2 animate-ping" style="background-color: var(--primary-light);"></span>
        {{ $hero.badge_text | default "Nouvelle recette chaque jour" }}
      </div>

      <!-- Titre principal - COULEURS SYSTÈME CSS -->
      <h2 class="text-5xl sm:text-6xl lg:text-7xl xl:text-8xl font-bold text-white mb-8 leading-none tracking-tight opacity-0 animate-fade-in-down">
        <span class="block mb-2 bg-gradient-to-r from-white via-white to-white/80 bg-clip-text text-transparent drop-shadow-2xl">
          {{ $hero.title_line1 | default "Plongez dans" }}
        </span>
        <span class="block bg-clip-text text-transparent drop-shadow-2xl" style="background: linear-gradient(to right, #f59e0b, #d97706); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
          {{ $hero.title_line2 | default "l'Art de la Cuisine" }}
        </span>

      </h2>

      <!-- Sous-titre - COULEUR COHÉRENTE -->
    <p class="text-xl sm:text-2xl text-white/90 mb-12 max-w-3xl leading-relaxed font-light tracking-wide drop-shadow-lg opacity-0 animate-fade-in-up animation-delay-200">
     {{ $hero.subtitle | default "Chaque jour, une création gourmande pensée pour enchanter vos papilles et sublimer votre quotidien." }}
     {{ if $hero.subtitle_highlight }}
       <span class="font-medium" style="color: var(--primary-light);">{{ $hero.subtitle_highlight }}</span>
     {{ end }}
    </p>

      <!-- Boutons CTA - CENTRALISÉS -->
      <div class="flex justify-center items-center opacity-0 animate-scale-in animation-delay-300">
          <a href="{{ $hero.cta_secondary_url | default "/recipes/" }}"
             class="group inline-flex items-center justify-center px-8 py-4 text-lg font-medium text-white border-2 border-white/30 hover:border-white rounded-full glass hover:glass backdrop-blur-sm transition-all duration-300">
          <span class="flex items-center">
            {{ $hero.cta_secondary_text | default "Explorer les recettes" }}
            <svg class="w-5 h-5 ml-2 transform group-hover:translate-x-1 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
            </svg>
          </span>
        </a>
      </div>
    </div>

    <!-- Particules flottantes - COULEURS SYSTÈME CSS -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none z-30">
      <div class="absolute top-1/4 left-1/4 w-2 h-2 rounded-full animate-ping" style="background-color: rgba(234, 88, 12, 0.3);"></div>
      <div class="absolute top-1/3 right-1/3 w-1 h-1 rounded-full animate-pulse" style="background-color: rgba(251, 124, 71, 0.4);"></div>
      <div class="absolute bottom-1/4 left-1/3 w-3 h-3 rounded-full animate-ping animation-delay-1000" style="background-color: rgba(194, 65, 12, 0.2);"></div>
    </div>

  </section>

{{ else }}
  <section class="relative inset-0 w-full h-full flex items-center justify-center bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900">
    <p class="text-white text-center z-10 text-lg">Image hero-bg.jpg introuvable dans assets/images/</p>
  </section>
{{ end }}
